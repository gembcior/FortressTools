cmake_minimum_required(VERSION 3.15)

if(NOT UNIT_TEST)

  add_library(hal STATIC)

  target_sources(hal
    PRIVATE
      src/hal_startup.cpp
      src/hal_cpu.cpp
      src/hal_gpio.cpp
      src/hal_usart.cpp
      src/hal_spi.cpp
  )

  target_include_directories(hal
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/inc
    PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/src
  )

  target_link_libraries(hal
    PUBLIC
      cubemx
  )

endif(NOT UNIT_TEST)
